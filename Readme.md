## Запуск приложений

Для запуска приложения необходимо использовать следующиую параметры командной строки:

* VM options: `-Dspring.profiles.active=h2 -Dspring.config.name=application`
(для работы с базой данных H2)

* VM options: `-Dspring.profiles.active=postgres -Dspring.config.name=application`
(для работы с базой данных PostgresQL)

Настройки на базу данных указываются в файлах dao-h2.properties и dao-postgres.properties соответственно. В случае необходимости использования другой базы данных, добавьте аналогичный файл и используйте соответствующий профиль в параметрах командной строки
По умолчанию, приложение работает с поисковым индексом ElasticSearch в памяти. В случае необходимости настройки на локальную базу, неоходимо закоментировать параметр `spring.data.elasticsearch.properties.http.enabled` в файле `application.properties` и раскоментировать два параметра настроек на локальную базу:
`#spring.data.elasticsearch.repositories.enabled=true`
`#spring.data.elasticsearch.cluster-nodes=localhost:9300`


### Автогенерация данных

Для подключения опции автогенерации данных и таблиц, используется дополнительный профиль при запуске приложения: `initdb`.
Например, `-Dspring.profiles.active=postgres,initdb ...`

Файл с данными находится в каталоге `resources` и имеет название `initdb`. Формат данных в файле имеет следующий вид:
`Moka|like Turkish, but moka|1.5`,

где `Moka` - наименование вида кофе,

`like Turkish, but moka` - описание,

`1.5` - цена.

Каждый новый вид кофе записывается с новой строки.

### Замена логики расчета стоимости
Файл, отвечающий за логику расчета стоимости находится в каталоге `resources` и является классом groovy, наследуемым от интерфейса `PriceGenerator`.
В случае необходимости изменения логики расчета, необходимо наследовать новый файл от того же интерфейса и поместить его в тот же каталог. В файле `application.properties` в параметре `coffee.shop.script-name` указано название файла, который отвечает за логику расчета заказа в настоящий момент.